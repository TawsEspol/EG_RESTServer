language: python
python:
- '3.5'
addons:
  postgresql: 9.6
  apt:
    packages:
    - postgresql-9.6-postgis-2.3
env:
  matrix:
  - DJANGO=2.0.1 DB=postgres
  global:
  - secure: nsFoPt433dEvTyNZgEMd33ph9WcdYs6MvS/wJPN6y4ADE8ojqeiqljTFAPKHgiJaAZBsHvQv5RmZLk+C+ulFg7QLVVqZzyiU5NQK6aCSndhvGqOje9J0zgaxLIkIbMiw9oBbieXbS1pp2KTh/39RvjnZt3ju3Uj1S7eQOfOqXCamlwoyTHpw6gIRoccmydA6p5EpLJfRncR9w90qI4CCs++XUSc2eH1NLjs4U4qj4Gh1TFy1v7pa/ervlq12GUMIgnok+m9C8+PvdJEB6Rl1Hys6Run5LxCDD0OvXAKPuDomD2DEUbjkvr4299NZvmQqPghq19xgun8G/UOQkIuQC5l8qvrJMR/dMuIuMYuPvNP4+J+dEej2PxJVyF3+D7S+ce0I257SaQm4zxa6mn1pl5t0KiW7mdApFVVDIOjwBZ1WPi+9s0rJ7odr9Ei71P7vsPjdsA6li7sSM4bnzZ/tlRiAeM4kCf3Ysg8DMFK+eABW/BzgYekQ2hznzjX4aNAwf8UkOl5BuIhYPz8Ka726VSZXputr6BDkxiRCUXbxIG0Hc43jWTR/sO1uFGOtKB5/UptlhXsihUvyxqhVT2/t629KxgASgEv/wefPSmxcgXZ3ItYFJS81T0G67J1sOrEzCWwAsIE85gQTRawVoqLK0LMW2QL+qiWUTR03EGgLlMs=
  - secure: cY7yfGqu6d7MVnQ9WGgmIY+Glbo5HMSn2FQdeTSdVFwE/gbjTWKVGx7ReNIY1vX+u2BlGw/LCRXljmp9jxFuOEw679b2HiFVjRTQFKRmmERp2NhH+OsgKkeGEt+P17xAzrygSeqDVl/IxMmz30N2BQsU1l4Goy20wT2i9blPoBbtNGCnZguwJPIESYpMjOoldE1kTktNLsvt04G0S8XoyjmIOUOeED2G3tsfKbHgX/sJmytj5pq5QASsmHcuLiidefFTTkV3FpUEKJ/VKjFmc93ZKHEHbTNMJdQUFluc86OfaLCHQXDCsjqSXMCbu9+K9DRzF0xdLGhdaHsNcv0x9+Ze1yHRZGzPvmiitkzyqVEMQSlcBeXoCCdzWjQjkeuIlZE2gtvsfRm+HpvKHO4FaZQMuZSuRrFoVThfRuxooFznahVEDYwCC92ltMdICIWLoWqacJ8NFSJYe7NLZ9wr+zdq+QywNInkN+hKgH7cwRgcAZU3ZqdDC7u0DjqhQ6NSIREdjuPUIzEP2rQhEao6CHf8tMtGrfzEZ2ytirbPgtjV/KQFhGN3vH4ZoAem9f/FX7gTh/jduFuzL++Dh4a3KC+qlBRUUSTKNwaxjRsxWsbMBiq3wgs3doZeZ97kh6MZk3ihircoxRmKfNdmfYTHO3EHyF1BcWQhVKYblmZtJEc=
  - secure: s+lhj9obvGY2hggEGWsI7gmcCQI8OM+djnpXg8fdSQtBPyXdi7pjyTysuF5lbytxOC8KDcHYG9fRWgmGItO9z4xXu/tGEgUR2exPzHkL5ld3m1Yd3+KRWoqaFuZ5XSs0Kyk/WieK/CIRMeXuCrj9SkFWvDqBkf6YI5pKEUt06K2lN89Z8i1TxoZr2BzOQvKuRIdRU80g/d6+PhrqSWlzFAC+388+INuImYR8fR/AsnYYzlvBNU2KujYSntAHmgQCfLqKfInJzHdubtjXELplNTYJZ3T+F1zOF0qWsVpHCKX54wcFGJDNbc8Hhgv98HRc+3NFt5STLyHIqPRINUHjkbm/1FtgGnrmzKwnEy4X893K47KQchJ6reuaWa3b8UZG2vlYd2nFcN2unN+N2Bvf62xEx5Bj6IEfWHYVMh42OOgQ+pTM7WAOdtzAed4SjI4ShfdRYfpHWiuGqLH/7kf36M/zUas+br0IhppGnKi2uiojbKEcQe3wy73PcOFIDiAhVZOFpZidDCKsuTcuyxrlRl7ollk4ZeMnqAPbbEkqtM+wFn4h6/uQwW0AXbvrFUqGf1wUmuPf15w2qmsSe0WdNivrgfmK30JMbHklI21ULEwB88Ep7NM+DV14aPzQfPGJvTlCzlGxE5tY7T7vrwpQAo6LiCnzkBc1R4cvYQhC+2Q=
  - secure: w3NWEvLNZQaP4d9e8d9XmT282z8fv18WzgObzKWlz0zd+nNqFUfsG+mvEAzSAfwFWsPPe3ib9xeJscA8FhFgFIzo0DlSRKLGtYOsPraVjq9TOlGEmKuc4Dtu6qzXSd5aVbfKcdBwVeJlhLTk8jpP6AS2HUfMADZDsDUakqiOtTcj2uf37WcbBkyeFlhaMweusk/t939cAHUPiE+9ahrGE/sCejpdb8De9e/TBcz4hfhji/78CGn06Gg5xLjde9hNAkT8v1pg2Fyic3idsXYb8jyIXI11N16xZIdqXPmZprHqiQp3UmTyAwewtC2CeJiSlF5vnVcdG95awxCPo8XSke5fCCnKZSBXbDCQs9dqGIpd/Ora4Dywzsolz5e2CSeFW6dmlpF/RtI2ctduORBT/gUg9ErmiGBTEZwB9Zq4Hd2d2VfHIAZmAqU8ZPA5ixvZH0qb6v9MwTzeCMuQa1pUQFLdAk3i7X1r4llQHc6EUB0vdcfp/LSnfF8f2bG8hoBsXcGWhzit3un8bXzuI8OljDidWUce/wk/ISqXetRDToQ0kjqb3j8N2soFwq283SjAQkomDyVdkEvuh2A7MKfty02lUK/EOP5dvDDPrAzFnq3m6RgPxPbkCUiwBM2gcU8UbJ5PJjASqimoPQHhpenQwAzzhfhVR0521am8U3Kjnpo=
  - secure: ViLtUHRfVzuLloOKfZWAHdickB2E4/0l9kTIou+wfogyOizjA/nSdVCpO6kp4VdRoonL6Y/4RcMvHqmD4RwTtQC/WfM2MhAUiMZV03UH2/H5lSB189WWl3jzX//dnQQvQ9dBganA/Y62Q10ZNLp0matvkKP2yRwcz33dD2Fi3b+oeX/hhbOgz05q9iIpuHdSvrr6qsaU6F/snZC1RLtmzg7BY9sx1bMpDj2F7kZQPdr/2QcOMG8MbjYjvn2ehHMk7IvYj6fa0In7TWdu5iutlslBXN1DahcTvrMC+HPOTOCz5rTZcp+3pfKBKoUmcscH8glgl9nlRWWHO28kpL03iNlK+G30kIXFEODecbrnDqc6ovvqE6nhuQ+a5Q3NZKWWpBFzxfhIWWflfUMw2D8lbNrzPU5qjVSaV28e3edSvWd3Lt/CSMrjPUmbGWH5sGFdXvupDPj3JZ4yzBzlZCtIZusIBFF9EowlEZmZ1CBrqJ66WiXqBQNGl/XDAjUYfp8LaX2rDMX4G6efPbXeatEli9QLhwMuORkAl7W4353aeUUC8jrNYxvIc9psmSjX7JJWXY0DJkJGgBEbnCS8gJPvI9EjhcSeR3WoV3XjwuhZjMq6TX58wQacxJCp4uEOlrIehJL+iGfQNPanMhpnbMf8EZbW7Y4x2lD9MT2NSXb5puA=
branches:
  only:
  - development
install:
- pip install -r requirements.txt
before_script:
- psql -c 'create database espolguide_db;' -U postgres
- sudo -u postgres psql -c "CREATE EXTENSION postgis; CREATE EXTENSION postgis_topology;"
  espolguide_db
script:
- python manage.py collectstatic --noinput
- python manage.py test
after_success:
- coverage report
