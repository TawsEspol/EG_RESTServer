language: python
python:
- '3.5'
addons:
  postgresql: 9.6
  apt:
    packages:
    - postgresql-9.6-postgis-2.3
env:
  matrix:
  - DJANGO=2.0.1 DB=postgres
  global:
  - secure: WPnIDcFTpitXfie4Zg1Hp8emUNzBl5vwceZqAuaYchn1P4dTq6foo8Y2ilFh/Y/bFXhkGulgu2R8EhCEdsYuPdIxbseUannfJDp0/xGb6RoF1tspuVkpq8/U9ytV7EpATiTAGPxRV0mtC2itpA6Wnv21cbq8FsjSvDUJ7t84NTVyDJUveyEed2c7qlhwerXyokseMI1RjXUfO+UEXhmtMyXKTSYr6YIMCMO9BYxp5XHN3pY9ov3RiT5S5M2a1iFG9Bk84JY4MrcDAE7S/Ra4zn5Dm3RRrA7Oc7iA44AH1BeviKNgeFhWaeRWVdPeXxHMVJZEkSZ9IDog160+2U7b9jzAPLQSABa4awPwul5HWv/KN7jQNEjwUsXHYLysbWmffgIIisIbWUoTSp8m3kE2xR+x7m9eGRALcrJ8zJy569+0iTYMvrZeeT0Lr9MUcJZ7DVzmUxGZgGkJ3xgqdNfO5zXGeBeIc3cTqqG5Cxqcc95F2p0UHISeLziTWZLm9YbF7QuLNx/w5WhaPsPQ3h1UGr2AdWpo5imEUzMUd2FRNvMXUhw6cpAALx5eMhd28kxn9aEKkVlFB/BUmXN0hGwHO63pibdQ40+svCUbqAUQNNRVa+NyjnNOcUn6iGOO4FUQFmxJ2Rke4QrSNhkIThz4VQ1MSZIn066CcGTJK11O0H4=
  - secure: ZEhahxDBu6PyGuPztyWS749sYh2SaWfG8VKqUB+KNpmSSh0JoxrMLraaFCzuml8XcHcgYNC3ALeA3nHHdUAoULl5PREeD3QzqI61jYCsMPoV6zeBa09fMvX01bdqOsgPobzkptO6I3IF3n+liAlq1pCLb5p6VT7yV9baY7K1Z687YVy25LG7zaYfcXAChMApd1JnVfcoTkUC2Yk7HQblTnCcRp2wbdrexO7GGnfNTmK7e8yEsvdc4k23Wumw+vzKCGIFTP1FfwawDXJEDMrIIhWvMCIXO/8znRov0YzL6c4p6GYT+U3HH5YIeJpQbYGHvCsTqlR+csaSlTFxma/+X0kF/S6HYGKu9zZOVoHKpHTxlBS3e8VdZptzhxu/M8o1NIWz5NYO45eD/RqJdn+UT7+hB3qiC7zVkDRfOGjMB590m6ahHjj9SCYe+k1i3HojKLsk0MV72Pf5XJ/dT7uW9qNRZgeqo6KGJqHU61/VSZsDz20nJTF9R9UGvyo0zA/lPDI3Uiugo3iQ7dbOFw9IscD6wYO3SEZzNeuEpiTHq4RcYWe1e2i16tckwrp2fs6J7zsh4IT8G6uKCsWasyKjOfjA0EALhfXTp+99sS6utFINVlVCxCFfAFq72EQtg0LsWdl/WPmKx1zqVqRTrdZsL1/GueqNfqdgQ+M2xilCrY0=
  - secure: efe71t2bhs6w9xqDqrL2nFAuDa6/AQizMOzrnZMkMiGrNVKxAZkLiYnw5ztz9+xQBEe2hDMLmAX29md8+jsH+qJ5OV9E9VUM633s+ROToeJoadtfsWF3u37UL7U0GGPu7KRDusIyPPviWntbR7oSN9XAWRcCskWaoXUEdE+Zw4RYt/61RgltiOd2SSdX5QUpgcj2JMpghjA4kU2TjlozdsCuUWq7tDmqVF9zfaIyQXZSNysHRhmHmFibZWBCI25wc6Ndb0ENGLyf5HYSjt/5sFxPVZeXbBdKkD43B20lVCj6n+vtt3hGc48/G1Nb1+R4R9Ho6yxh9AjrNTfBHkulgT+IRpdqIDjr06TL+JjS7vmOD/VnecnNt0g46OEtRis7c4/AClM9V93Lw7319CFxI8TayiZ+Yox6xZ6jdoIzRhbyFCQ0pSkNIpT5S6Pi2qJwBM4U3gAWtBw9A8Y6qpmadW0WerlNpgvV+Wg2EsFd6Jk1o2dr4yvv8WgQfBJxi9MBn0xrSB0QgUSBilpWWzhfovuNq3U0lBfzTHalQ+5TtV/2so3YgFsrLlj6m5dw9NT6NHbaErgig0xMRjvVTecjpR7jlG+DHnh3i+yHZM9nS6JSA6W5QHvrlosVzZUL+JL8LPeldnJBCVx2NGzxXV9r+P29NY8CKLwayV7GZ7h9m34=
  - secure: hD5i0Vb7oj2I2XlhSE+Ujb5NFaktEwJV7Q68skMEJqwjuFMe33Fr8EmIBm6dBhWLDUGVQ4o4RpVyvgiFJUHGvjK8yHTU4/3XRF8eFyexxDtkCJGFoaNOvnt5dvDJ/WnLHt8PKQqD7RdCcCHBf80FlnXMkTAGJOpmY55osWPBMCJ70MRWSx+sWCatRNEJVqQQreZcE/hfxs3PjINz0/ix0vY5FyurOdRVGiLNQYwV4egk3Pb7exzXldbslugwmJQ6xO42RkrNBIoJTuOW7kBm2GPulPClvHPapb5SKAdogWIMApRervBnbwwiwNULoSz4PseLGi5lxXYQS4oZ6oEI3jYGWdgPNzJ6qrShzoaP7sVZtqGc6vMPWcfiFEstzCYFAIG77xhs6YqDvlcz46OXpXFJfjBH7GORqCq0Uxtxq0J2Ol5fkLWcWKfNG1UED6t1QKRZ1NxBY5a64jLcx4FlKFULuQ/tEreKFKUSUsbhyIlrxXVfOnUGJ/6ZLbMFNxSuH6pbn7T4lWj3C9iblL8rjLugrujKi3f8es79ypQNVxB1/sj6WnG6snbr2GxzKSSlmye0dKMJZ3Sg4olR46ftwyi/Q7xdgN+BtSeUbCS3HitJkvQse+ag31i4aXAzIYTwo0H5/AePJB6PkQPvppbPN+tBd58QqIUmaZyZquOl1HA=
  - secure: WSeRRUo/L1+FpfE+jZyvIPWu4UoLNH/oxJ5F6+A1e1dh+MINiZt67kkErHmLBOj79EWKhlYXRwhXj0RHRXwrIuwASmfFaqy0ttJUww2vosLx8M1vcBSSEv6RZYDchWoPK5zVxS3bW38rMFfmYYu1gr2eid9KeGr9DYGmfRW5dM6xnirCyhjl9HLRyXGQNuBcZtmENqnOZbswoo4mJxGG/MTkZIzyBIrP5i9btE22+gCP23k86bBsZthwE8IGxmNXC8f58DlghI1Bldr9Nm4LJnXUifZBn/l/jrSLzUQB5aGaIlt6Ngv5HDWH2aqzdgZzEEcH5iX8NoaBYpsp6iqf/3W85xcJf3+IxMEPPyMPzD2Uxg+T5MTx3FdSzOpo3pqti62Zw67UQkcw+vu9AUbXrTea3kVT3g8jIQ/NOIAEyHlEYmyhOpMkNXwa2Rj1+yikot1dMi0zidClnqZJPT/L9UqPoe6NFZUl1d4rlS3c4hrhR73MuNdlGw+nuh22iu+z3l1nZYA3iIYToF7XXmr8W9TLiM2hJDahV/lp1skgwqm/rr6eIYyRpckOuUEOs3ygbaFxiHlitHesnFdO2o5e7SFCrgTGSTO7PSstqWevmE8veUIKSR2qYLIkRbpdwBe6+ZeaL0dTqYgvWcFatW1B4kwrqZ/IJdtctqNvg5FRlLI=

branches:
  only:
  - development

install:
- pip install -r requirements.txt

before_script:
- psql -c 'create database espolguide_db;' -U postgres
- sudo -u postgres psql -c "CREATE EXTENSION postgis; CREATE EXTENSION postgis_topology;"
  espolguide_db

script: python manage.py collectstatic python manage.py test
after_success: coverage report
